<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 10px;
    }
    .signature-container {
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 10px;
    }
    .signature-canvas {
        border: 1px solid #000;
        background-color: #fff;
    }
    .signature-actions {
        margin-top: 10px;
    }
    .clear-button {
        background-color: #f44336;
        color: #fff;
        border: none;
        padding: 10px 20px;
        margin-right: 10px;
        border-radius: 5px;
        cursor: pointer;
    }
    .save-button {
        background-color: #4CAF50;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
    }
</style>
</head>
<body>
    <h1>개인정보수집 및 활용동의</h1>
    <form id="consentForm">
        <div class="form-group">
            <label for="name">이름:</label>
            <input type="text" class="form-control" id="name" required>
        </div>
        <div class="form-group">
            <label for="contact">연락처:</label>
            <input type="text" class="form-control" id="contact" required>
        </div>
        <div class="form-group">
            <label for="email">이메일:</label>
            <input type="email" class="form-control" id="email" required>
        </div>
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="consent" required>
            <label class="form-check-label" for="consent">개인정보 동의</label>
        </div>
        <div class="signature-container">
            <label for="signature">서명:</label>
            <canvas id="signature-canvas" class="signature-canvas" width="400" height="150"></canvas>
        </div>
        <button type="button" class="btn btn-primary" id="submitBtn">제출</button>
    </form>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        var canvas = document.getElementById('signature-canvas');
        var ctx = canvas.getContext('2d');
        var isDrawing = false;

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('touchstart', startDrawing);

        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchmove', draw);

        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);
        canvas.addEventListener('touchend', stopDrawing);

        function startDrawing(e) {
            isDrawing = true;
            ctx.beginPath();
            if (e.touches) {
                var touch = e.touches[0];
                ctx.moveTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
            } else {
                ctx.moveTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
            }
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            if (e.touches) {
                var touch = e.touches[0];
                ctx.lineTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
            } else {
                ctx.lineTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
            }
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        document.getElementById('submitBtn').addEventListener('click', function () {
            var signatureDataUrl = canvas.toDataURL();
            // 여기에서 서명 데이터(signatureDataUrl)를 원하는 방식으로 처리할 수 있습니다.
            // 예를 들어, Google Apps Script를 사용하여 저장하거나 전송할 수 있습니다.
        });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
    var canvas = document.getElementById('signature-canvas');
    var signaturePad = new SignaturePad(canvas);
  
    document.getElementById('submitBtn').addEventListener('click', function () {
        var name = document.getElementById('name').value;
        var contact = document.getElementById('contact').value;
        var email = document.getElementById('email').value;
        var consent = document.getElementById('consent').checked;
        var signature = signaturePad.toDataURL();
  
        var formData = {
            name: name,
            contact: contact,
            email: email,
            consent: consent,
            signature: signature
        };
  
        google.script.run.withSuccessHandler(function (response) {
            if (response) {
                alert('폼이 성공적으로 제출되었습니다.');
                // 여기에서 원하는 동작 수행
            } else {
                alert('폼 제출 중 오류가 발생했습니다.');
            }
        }).processForm(formData);
    });
});
    </script>
</body>
</html>

