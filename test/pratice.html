<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>#개인정보수집.이용동의</title>
    <!-- SignaturePad 라이브러리 로드 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/1.5.3/signature_pad.min.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function () {
    var canvas = document.getElementById('signature-canvas');
    var signaturePad = new SignaturePad(canvas);

    document.getElementById('submitBtn').addEventListener('click', function () {
        var name = document.getElementById('name').value;
        var contact = document.getElementById('contact').value;
        var email = document.getElementById('email').value;
        var consentCheckbox = document.getElementById('consent');
        var consent = consentCheckbox.checked ? '동의함' : '동의하지 않음'; // 체크 여부에 따라 "동의함" 또는 "동의하지 않음" 저장
        var signature = signaturePad.toDataURL();

        var formData = {
            name: name,
            contact: contact,
            email: email,
            consent: consent,
            signature: signature
        };
        alert('🤷‍♂️동의서를 제출하고 있습니다. 잠시만 기다려 주세요.');
        // Google Apps Script로 데이터 전송
        google.script.run.withSuccessHandler(function (response) {
            if (response) {
                alert('🚀개인정보수집.이용동의서가 성공적으로 제출되었습니다.');
                
                // 여기에서 원하는 동작 수행

                // 폼 요소 초기화
                resetForm();
            } else {
                alert('⚠제출 중 오류가 발생했습니다.');
            }
        }).processForm(formData);
    });
});

// 폼 요소 초기화 함수
function resetForm() {
    document.getElementById('name').value = '';
    document.getElementById('contact').value = '';
    document.getElementById('email').value = '';
    document.getElementById('consent').checked = false;
    var canvas = document.getElementById('signature-canvas');
    var ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
}
    </script>
    <style>
        body {
            width: 100%;
            max-width: 600px;
            font-family: Arial, sans-serif;
            margin: 10px;
        }
        form {
          width: 100%;
        }
        .signature-container {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
        }
        .signature-canvas {
            border: 1px solid #000;
            background-color: #fff;
        }
        .signature-actions {
            margin-top: 10px;
        }
        .clear-button {
            background-color: #f44336;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin-right: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .save-button {
            background-color: #4CAF50;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        /* 디바이스 넓이에 따른 스타일 조절 */
    @media (max-width: 600px) {
        .signature-canvas {
            width: 95%; /* 디바이스 넓이가 600px 이하일 때 100%로 조절 */
            max-width: 350px; /* 최대 넓이 지정 (선택사항) */
        }
        /* 제출하기 버튼 가로 크기 조절 */
        #submitBtn {
            width: 50%; /* 화면의 약 50% 크기로 조절 */
        }
    }
    </style>
</head>
<body>
    <h4>개인정보수집 및 활용동의</h4>
    <form id="consentForm">
        <div class="form-group">
            <div class="form-group">
                <label for="name">이름:</label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="form-group">
                <label for="contact">연락처:</label>
                <input type="text" class="form-control" id="contact" required>
            </div>
            <div class="form-group">
                <label for="email">이메일:</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="consent" required>
                <label class="form-check-label" for="consent">개인정보 동의</label>
            </div>
        </div>
        <div class="signature-container">
            <label for="signature">서명:</label>
            <canvas id="signature-canvas" class="signature-canvas" width="350" height="150"></canvas>
        </div>
        <button type="button" class="btn btn-primary btn-block" id="submitBtn">제출하기</button>
    </form>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        var canvas = document.getElementById('signature-canvas');
        var ctx = canvas.getContext('2d');
        var isDrawing = false;

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('touchstart', startDrawing);

        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchmove', draw);

        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);
        canvas.addEventListener('touchend', stopDrawing);

        function startDrawing(e) {
            isDrawing = true;
            ctx.beginPath();
            if (e.touches) {
                var touch = e.touches[0];
                ctx.moveTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
            } else {
                ctx.moveTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
            }
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            if (e.touches) {
                var touch = e.touches[0];
                ctx.lineTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
            } else {
                ctx.lineTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
            }
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }
    </script>
</body>
</html>
