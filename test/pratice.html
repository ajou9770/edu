<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>#ê°œì¸ì •ë³´ìˆ˜ì§‘.ì´ìš©ë™ì˜</title>
    <!-- SignaturePad ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/1.5.3/signature_pad.min.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function () {
    var canvas = document.getElementById('signature-canvas');
    var signaturePad = new SignaturePad(canvas);

    document.getElementById('submitBtn').addEventListener('click', function () {
        var name = document.getElementById('name').value;
        var contact = document.getElementById('contact').value;
        var email = document.getElementById('email').value;
        var consentCheckbox = document.getElementById('consent');
        var consent = consentCheckbox.checked ? 'ë™ì˜í•¨' : 'ë™ì˜í•˜ì§€ ì•ŠìŒ'; // ì²´í¬ ì—¬ë¶€ì— ë”°ë¼ "ë™ì˜í•¨" ë˜ëŠ” "ë™ì˜í•˜ì§€ ì•ŠìŒ" ì €ì¥
        var signature = signaturePad.toDataURL();

        var formData = {
            name: name,
            contact: contact,
            email: email,
            consent: consent,
            signature: signature
        };
        alert('ğŸ¤·â€â™‚ï¸ë™ì˜ì„œë¥¼ ì œì¶œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.');
        // Google Apps Scriptë¡œ ë°ì´í„° ì „ì†¡
        google.script.run.withSuccessHandler(function (response) {
            if (response) {
                alert('ğŸš€ê°œì¸ì •ë³´ìˆ˜ì§‘.ì´ìš©ë™ì˜ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.');
                
                // ì—¬ê¸°ì—ì„œ ì›í•˜ëŠ” ë™ì‘ ìˆ˜í–‰

                // í¼ ìš”ì†Œ ì´ˆê¸°í™”
                resetForm();
            } else {
                alert('âš ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }).processForm(formData);
    });
});

// í¼ ìš”ì†Œ ì´ˆê¸°í™” í•¨ìˆ˜
function resetForm() {
    document.getElementById('name').value = '';
    document.getElementById('contact').value = '';
    document.getElementById('email').value = '';
    document.getElementById('consent').checked = false;
    var canvas = document.getElementById('signature-canvas');
    var ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
}
    </script>
    <style>
        body {
            width: 100%;
            max-width: 600px;
            font-family: Arial, sans-serif;
            margin: 10px;
        }
        form {
          width: 100%;
        }
        .signature-container {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
        }
        .signature-canvas {
            border: 1px solid #000;
            background-color: #fff;
        }
        .signature-actions {
            margin-top: 10px;
        }
        .clear-button {
            background-color: #f44336;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin-right: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .save-button {
            background-color: #4CAF50;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        /* ë””ë°”ì´ìŠ¤ ë„“ì´ì— ë”°ë¥¸ ìŠ¤íƒ€ì¼ ì¡°ì ˆ */
    @media (max-width: 600px) {
        .signature-canvas {
            width: 95%; /* ë””ë°”ì´ìŠ¤ ë„“ì´ê°€ 600px ì´í•˜ì¼ ë•Œ 100%ë¡œ ì¡°ì ˆ */
            max-width: 350px; /* ìµœëŒ€ ë„“ì´ ì§€ì • (ì„ íƒì‚¬í•­) */
        }
        /* ì œì¶œí•˜ê¸° ë²„íŠ¼ ê°€ë¡œ í¬ê¸° ì¡°ì ˆ */
        #submitBtn {
            width: 50%; /* í™”ë©´ì˜ ì•½ 50% í¬ê¸°ë¡œ ì¡°ì ˆ */
        }
    }
    </style>
</head>
<body>
    <h4>ê°œì¸ì •ë³´ìˆ˜ì§‘ ë° í™œìš©ë™ì˜</h4>
    <form id="consentForm">
        <div class="form-group">
            <div class="form-group">
                <label for="name">ì´ë¦„:</label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="form-group">
                <label for="contact">ì—°ë½ì²˜:</label>
                <input type="text" class="form-control" id="contact" required>
            </div>
            <div class="form-group">
                <label for="email">ì´ë©”ì¼:</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="consent" required>
                <label class="form-check-label" for="consent">ê°œì¸ì •ë³´ ë™ì˜</label>
            </div>
        </div>
        <div class="signature-container">
            <label for="signature">ì„œëª…:</label>
            <canvas id="signature-canvas" class="signature-canvas" width="350" height="150"></canvas>
        </div>
        <button type="button" class="btn btn-primary btn-block" id="submitBtn">ì œì¶œí•˜ê¸°</button>
    </form>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        var canvas = document.getElementById('signature-canvas');
        var ctx = canvas.getContext('2d');
        var isDrawing = false;

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('touchstart', startDrawing);

        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchmove', draw);

        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);
        canvas.addEventListener('touchend', stopDrawing);

        function startDrawing(e) {
            isDrawing = true;
            ctx.beginPath();
            if (e.touches) {
                var touch = e.touches[0];
                ctx.moveTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
            } else {
                ctx.moveTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
            }
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            if (e.touches) {
                var touch = e.touches[0];
                ctx.lineTo(touch.clientX - canvas.getBoundingClientRect().left, touch.clientY - canvas.getBoundingClientRect().top);
            } else {
                ctx.lineTo(e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top);
            }
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }
    </script>
</body>
</html>
